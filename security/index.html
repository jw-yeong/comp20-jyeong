<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Security Report</title>
        <link rel="stylesheet" href="style.css" type="text/css" />
    </head>
    
    <body>
        
        <h1 id="title">COMP 20 F2018 Security Lab</h1>        

        <h2>Introduction</h2>
          <p> Description of product and security task </p>

        <h2>Methodology</h2>
          <p>For preparation, I downloaded my partner's server side code, then modified my 2048 code to post
          results to my partner's Heroku server side app. I also got access to 
          my partner's source code via being added as a collaborator.<br>
          <br>
          I used the 2048/Heroku app normally, inserting data in the database with the game and with
          curl. I checked that entries were being inserted into the database via the mlab interface as
          well as via the main get('/')/leaderboard method.<br>
          <br>
          Next, I began penetration testing. First, without looking at the source code, I targetted the /submit POST method (which I knew existed from the specification of the previous homework), and successfully
          inserted malicious code, both through the 2048 game, as well as through curl, allowing for
          the execution of arbitrary code when users attempted to view the leaderboard. To prove this, I created alerts.<br>
          <br>
          Next, I targetted the database via the query string in the /scores.json GET method. After trying several permutations of query strings, I looked at the source code, and then constructed more
          informed query strings. 
          </p>

        <h2>Abstract of Findings</h2>
                  <p>lay description</p>
        <h2>Issues Found; Technical Analysis</h2>
          <ul>
          <li> Issue: XSS via curl </li>
          <li> Location: index.js, line 23 </li>
          <li> Severity: 9 </li>
          <li> Description: Finished the XSS game, then entered HTML script in the username
           field. This resulted in the script being entered in the database, which was then
           executed when the database was rendered on the leaderboard.</li>
          <img src="issue11.png" alt="vulnerabilityscreenshot1.1">
          <img src="issue12.png" alt="vulnerabilityscreenshot2.2">
          <li> Resolution: Could be avoided by checking and sanitizing user input before it's used.</li>
          </ul>
                  <p>Issue, location/page, severity, description, pic proof, resolution</p>
                  <p>XSS post method (via curl)
        <h2>Conclusion</h2>
            <p>The server-side was rife with simple yet critical vulnerablities such as XSS and
            database injection. All the problems described above could have been avoided simply
            by checking/sanitizing user input for potentially malicious content; 
            the most heavy-handed, yet simple and effective sanitization being to simply remove
            all special characters from input before processing it.</p>
        <h2>References</h2>
          <a href="https://blog.websecurify.com/2014/08/hacking-nodejs-and-mongodb.html">
            WebSecurify - Hacking Nodejs and Mongodb</a><br>
          <a href="https://blog.websecurify.com/2014/08/hacking-nodejs-and-mongodb.html">
            WebSecurify - Hacking Nodejs and Mongodb</a>
        

    </body>
</html>	
